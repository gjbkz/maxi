{
    "private": true,
    "license": "Apache-2.0",
    "scripts": {
        "dev:doc": "cd docs && chokidar 'index.tex' --initial --command 'pdflatex -interaction=nonstopmode index.tex'",
        "dev:client": "parcel client/index.html --out-dir client/output",
        "dev:server:tsc": "tsc --project server/tsconfig.json --watch --preserveWatchOutput",
        "dev:server": "run-p dev:server:*",
        "dev:start-server": "sam local start-api --region ap-northeast-1 --template server/template.yml",
        "dev": "run-p dev:server dev:client",
        "build:client:cleanup": "rimraf client/output",
        "build:client:parcel": "parcel build client/index.html --no-source-maps --out-dir client/output",
        "build:client": "run-s build:client:cleanup build:client:parcel",
        "build:server:cleanup": "rimraf server/lib",
        "build:server:tsc": "tsc --project server/tsconfig.json",
        "build:server": "run-s build:server:cleanup build:server:tsc",
        "build": "run-p build:server build:client",
        "test:client": "eslint client/script/**/*.ts",
        "test:server": "ava server/**/*.test.ts",
        "test": "run-p test:server test:client",
        "lint": "eslint client/script/**/*.ts server/src/**/*.ts",
        "version:changelog": "conventional-changelog --preset angular --infile CHANGELOG.md --same-file --release-count 0",
        "version:add": "git add .",
        "version": "npm-run-all --sequential version:changelog version:add"
    },
    "devDependencies": {
        "@commitlint/cli": "^7.5.2",
        "@commitlint/config-conventional": "^7.5.0",
        "@maxi-js/ci-tools": "file:modules-node/ci-tools",
        "@types/aws-lambda": "^8.10.24",
        "@types/node": "^11.13.8",
        "@types/react": "^16.8.14",
        "@types/react-dom": "^16.8.4",
        "@typescript-eslint/eslint-plugin": "^1.7.0",
        "autoprefixer": "^9.5.1",
        "ava": "^1.4.1",
        "chokidar-cli": "^1.2.2",
        "conventional-changelog-cli": "^2.0.12",
        "eslint": "^5.16.0",
        "globby": "^9.2.0",
        "husky": "^1.3.1",
        "lerna": "^3.13.4",
        "lint-staged": "^8.1.5",
        "npm-run-all": "^4.1.5",
        "parcel-bundler": "^1.12.3",
        "postcss-modules": "^1.4.1",
        "react": "^16.8.6",
        "react-dom": "^16.8.6",
        "rimraf": "^2.6.3",
        "ts-node": "^8.1.0",
        "typescript": "^3.4.5"
    },
    "eslintConfig": {
        "extends": [
            "eslint:recommended",
            "plugin:@typescript-eslint/recommended"
        ],
        "env": {
            "es6": true
        },
        "rules": {
            "no-constant-condition": [
                "error",
                {
                    "checkLoops": false
                }
            ]
        },
        "overrides": [
            {
                "files": [
                    "*.ts"
                ],
                "parser": "@typescript-eslint/parser",
                "plugins": [
                    "@typescript-eslint"
                ],
                "rules": {
                    "indent": "off",
                    "@typescript-eslint/array-type": [
                        "error",
                        "generic"
                    ],
                    "@typescript-eslint/explicit-function-return-type": "off",
                    "@typescript-eslint/indent": [
                        "error",
                        4,
                        {
                            "SwitchCase": 0,
                            "MemberExpression": 0,
                            "ignoredNodes": [
                                "ConditionalExpression"
                            ]
                        }
                    ],
                    "@typescript-eslint/interface-name-prefix": [
                        "error",
                        "always"
                    ],
                    "@typescript-eslint/member-delimiter-style": [
                        "error",
                        {
                            "multiline": {
                                "delimiter": "comma",
                                "requireLast": true
                            },
                            "singleline": {
                                "delimiter": "comma",
                                "requireLast": false
                            }
                        }
                    ],
                    "@typescript-eslint/no-use-before-define": [
                        "error",
                        {
                            "variables": false
                        }
                    ]
                }
            },
            {
                "files": [
                    "modules-dom/**/*.ts",
                    "client/**/*.ts"
                ],
                "env": {
                    "browser": true
                },
                "globals": {
                    "document": true
                }
            },
            {
                "files": [
                    "modules-node/**/*.ts",
                    "ci-scripts/**/*.ts",
                    "server/**/*.ts"
                ],
                "env": {
                    "node": true
                }
            },
            {
                "files": [
                    "modules-node/cli-tools/src/run.ts",
                    "server/src/types.ts",
                    "client/script/types.ts",
                    "client/script/util/isAvailablePlotType.ts",
                    "client/script/util/useCache.ts"
                ],
                "rules": {
                    "@typescript-eslint/no-explicit-any": "off"
                }
            }
        ]
    },
    "ava": {
        "compileEnhancements": false,
        "extensions": [
            "ts"
        ],
        "require": [
            "ts-node/register"
        ]
    },
    "commitlint": {
        "extends": [
            "@commitlint/config-conventional"
        ]
    },
    "husky": {
        "hooks": {
            "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
        }
    },
    "renovate-config": {
        "extends": [
            ":ignoreModulesAndTests",
            ":unpublishSafe",
            ":semanticPrefixChore",
            ":prNotPending",
            ":prConcurrentLimit10",
            ":prHourlyLimitNone",
            ":label(dependencies)",
            ":automergeMinor",
            "group:monorepos"
        ]
    }
}
